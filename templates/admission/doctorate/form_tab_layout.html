{% extends "layout.html" %}{% load bootstrap3 i18n static admission %}

{% comment "License" %}
* OSIS stands for Open Student Information System. It's an application
* designed to manage the core business of higher education institutions,
* such as universities, faculties, institutes and professional schools.
* The core business involves the administration of students, teachers,
* courses, programs and so on.
*
* Copyright (C) 2015-2022 Université catholique de Louvain (http://www.uclouvain.be)
*
* This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU General Public License as published by
* the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU General Public License for more details.
*
* A copy of this license - GNU General Public License - is available
* at the root of the source code of this program.  If not,
* see http://www.gnu.org/licenses/.
{% endcomment %}

{% block style %}
  <style>
    .form-group.required_field .control-label:after {
      content: " *";
      color: red;
    }
  </style>
{% endblock %}

{% block breadcrumb %}
    <ol class="breadcrumb">
        <li>
            <a href="{% url 'admission:doctorate-list' %}">
                {% trans "Doctorate admissions" %}
            </a>
        </li>
        {% if admission %}
            <li class="active">{{ admission.intitule_doctorat_fr }}</li>
        {% else %}
            <li class="active">{% trans "Create new doctorate admission" %}</li>
        {% endif %}
    </ol>
{% endblock %}

{% block content %}
    <div class="page-header h3">
    <span class="d-inline-block">
      {% if admission %}
          {{ admission.intitule_doctorat_fr }}
      {% else %}
          {% trans "Create new doctorate admission" %}
      {% endif %}
    </span>
        <a
            href="{% url 'admission:doctorate-list' %}"
            class="pull-right h5 text-primary"
        >
            <span class="fa fa-stream"></span>
            {% trans "Back to my requests" %}
        </a>
    </div>

    <div class="well">
        <div>
            {% trans "Reference:" %}
            {% if not admission %}
                {% trans "No reference yet - Go to Project tab" %}
            {% else %}
                {{ admission.intitule_doctorat_fr }} ({{ admission.reference }})
            {% endif %}
        </div>
        <div>
            {% trans "Status:" %}
            {% if not admission %}
                {% trans "Not submitted" %}
            {% else %}
                {{ admission.statut|enum_display:'ChoixStatusProposition' }}
            {% endif %}
        </div>
    </div>

    <p><em>
        {% blocktrans %}
            The online enrolment request procedure is split up into several
            sheet. The enrolment request can only be validated as soon as all
            sheets have been duly completed. The icons will remind you of the
            state of progress of your enrolment request which you can interrupt
            and resume at any moment.
        {% endblocktrans %}
    </em></p>

    {% include "template_messages.html" %}

    {% url "admission:doctorate-detail:"|add:request.resolver_match.url_name view.kwargs.pk as cancel_url %}

    <form class="osis-form" method="post" action="">
        {% csrf_token %}
        {% block form_content %}
            {% doctorate_tabs admission %}
            <div class="row">
                <div class="col-md-2">
                    {% doctorate_subtabs admission %}
                    {% block submit_button_affix %}
                        <hr />
                        <div
                            data-spy="affix"
                            data-offset-top="500"
                            style="top:90px"
                        >
                            <div>
                                <button
                                    type="submit" class="btn btn-primary"
                                    {% if cancel_url and not admission|can_update_tab:request.resolver_match.url_name %}
                                    disabled
                                    {% endif %}
                                >
                                <span
                                    class="glyphicon glyphicon-floppy-save"
                                    aria-hidden="true"
                                ></span>
                                    {% trans 'Save' %}
                                </button>
                            </div>
                            {% if cancel_url and admission|can_read_tab:request.resolver_match.url_name %}
                                <a
                                    href="{{ cancel_url }}"
                                    class="text-danger btn"
                                >
                                    {% trans "Cancel" %}
                                </a>
                            {% endif %}
                        </div>
                    {% endblock submit_button_affix %}
                </div>
                <div class="col-md-10">
                    {% block form %}{% endblock %}
                </div>
            </div>
        {% endblock form_content %}
    </form>
{% endblock %}
