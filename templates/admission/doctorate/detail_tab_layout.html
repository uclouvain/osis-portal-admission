{% extends "layout.html" %}
{% load bootstrap3 i18n static admission enums %}

{% comment "License" %}
* OSIS stands for Open Student Information System. It's an application
* designed to manage the core business of higher education institutions,
* such as universities, faculties, institutes and professional schools.
* The core business involves the administration of students, teachers,
* courses, programs and so on.
*
* Copyright (C) 2015-2022 Universit√© catholique de Louvain (http://www.uclouvain.be)
*
* This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU General Public License as published by
* the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU General Public License for more details.
*
* A copy of this license - GNU General Public License - is available
* at the root of the source code of this program.  If not,
* see http://www.gnu.org/licenses/.
{% endcomment %}

{% block style %}
  <link href="{% static "osis_document/osis-document.css" %}" rel="stylesheet"/>
  <link href="{% static "admission/admission.css" %}" rel="stylesheet"/>
{% endblock %}

{% block breadcrumb_area %}
  <ol class="breadcrumb">
    <li>
      {% if admission and admission.matricule_candidat != user.person.global_id %}
        <a href="{% url 'admission:supervised-list' %}">{% trans "Doctorate admissions" %}</a>
      {% else %}
        <a href="{% url 'admission:doctorate-list' %}">{% trans "Doctorate admissions" %}</a>
      {% endif %}
    </li>
    {% if admission %}
      <li class="active">
        {{ admission.intitule_doctorat }} ({{ admission.reference }})
      </li>
    {% else %}
      <li class="active">{% trans "Create new doctorate admission" %}</li>
    {% endif %}
  </ol>
{% endblock %}

{% block script %}
    {{ block.super }}
    <script src="{% static 'osis_document/osis-document.umd.min.js' %}"></script>
{% endblock %}

{% block content %}
    <div class="page-header h3">
        <span class="d-inline-block">
        {% if admission %}
            {{ admission.intitule_doctorat }} ({{ admission.reference }})
        {% else %}
            {% trans "Create new doctorate admission" %}
        {% endif %}
        </span>
      <a
        {% if admission and admission.matricule_candidat != user.person.global_id %}
          href="{% url 'admission:supervised-list' %}"
        {% else %}
          href="{% url 'admission:doctorate-list' %}"
        {% endif %}
          class="pull-right h5 text-primary"
      >
        <span class="fa fa-stream"></span>
        {% trans "Back to requests" %}
      </a>
    </div>

    <div class="well">
        <div>
            {% trans "Reference:" %}
            {% if not admission %}
                {% trans "No reference yet - Go to Project tab" %}
            {% else %}
                {{ admission.intitule_doctorat }} ({{ admission.reference }})
            {% endif %}
        </div>
        <div>
            {% trans "Status:" %}
            {% if not admission %}
                {% trans "Not submitted" %}
            {% else %}
                {{ admission.statut|enum_display:'ChoixStatutProposition' }}
            {% endif %}
        </div>

    </div>

    <p><em>
        {% blocktrans trimmed %}
            The online enrolment request procedure is split up into several
            sheet. The enrolment request can only be validated as soon as all
            sheets have been duly completed. The icons will remind you of the
            state of progress of your enrolment request which you can interrupt
            and resume at any moment.
        {% endblocktrans %}
    </em></p>

    <div id="template-messages-container">
     {% include "template_messages.html" %}
    </div>

    {% url 'admission:doctorate:update:'|add:request.resolver_match.url_name view.kwargs.pk as change_url %}
    {% get_current_tab as current_tab %}
    {% if change_url and change_url != request.path and admission|can_update_tab:current_tab %}
        <div class="text-right visible-xs visible-sm">
            <a href="{{ change_url }}" class="btn btn-primary">
                <span
                    class="glyphicon glyphicon-floppy-save" aria-hidden="true"
                ></span>
                {% trans 'Change my submission' %}
            </a>
        </div>
    {% endif %}

    {% doctorate_tabs admission %}
    <div class="row">
        <div class="col-md-2 visible-md visible-lg">
            {% doctorate_subtabs admission %}
        </div>
        <div class="col-md-10 quitting-context-excluded">
            {% block tab_content %}{% endblock %}
        </div>
    </div>
{% endblock %}
