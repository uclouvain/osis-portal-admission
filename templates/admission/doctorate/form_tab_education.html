{% extends "admission/doctorate/form_tab_layout.html" %}
{% load bootstrap3 i18n static admission %}

{% block form %}
  {% bootstrap_form_errors form %}

  <div class="row">
    <div class="col-md-12">{% bootstrap_field main_form.got_diploma %}</div>
  </div>

  <div id="got-diploma">
    <div class="row">
      <div class="col-md-6">{% bootstrap_field main_form.academic_graduation_year %}</div>
      <div class="col-md-6">{% bootstrap_field main_form.diploma_type %}</div>
    </div>

    {% panel _("Foreign diploma") id="foreign-diploma" %}
      {% bootstrap_field foreign_diploma_form.foreign_diploma_type %}
      {% bootstrap_field foreign_diploma_form.linguistic_regime %}
      {% bootstrap_field foreign_diploma_form.other_linguistic_regime %}
      {% bootstrap_field foreign_diploma_form.country %}
    {% endpanel %}

    {% panel _("Belgian diploma") id="belgian-diploma" %}
      {% panel _("Community of education") %}
        {% bootstrap_field belgian_diploma_form.community %}
      {% endpanel %}

      {% panel _("Type of education") id="education-type" %}
        <div class="form-group">
          <div>
            <p>{% bootstrap_label belgian_diploma_form.educational_type.label_tag %}</p>
            {% for radio in belgian_diploma_form.educational_type %}
              {% if radio.data.value == "TEACHING_OF_GENERAL_EDUCATION" %}
                {% bootstrap_label _(">> Educational transition :") %}
              {% elif radio.data.value == "QUALIFICATION_METHOD" %}
                {% bootstrap_label _(">> Educational  qualification :") %}
              {% endif %}
              <div class="radio">
                {{ radio }}
              </div>
            {% endfor %}
          </div>
        </div>

        {% bootstrap_field belgian_diploma_form.educational_other %}
      {% endpanel %}

      {% panel _("Course") %}
        {% bootstrap_field belgian_diploma_form.course_repeat %}
        {% bootstrap_field belgian_diploma_form.course_orientation %}
      {% endpanel %}

      {% panel _("Institue") %}
        <p><strong>What is the name of the educational institute that has provided to you a certificate of upper-secundary education (C.E.S.S.)?</strong></p>
        <p class="text-secondary">In order to help you at this matter, we propose you to perform a search based on the location or postal code.</p>
        {% bootstrap_field belgian_diploma_form.institute %}
        {% bootstrap_field belgian_diploma_form.other_institute %}
      {% endpanel %}

      {% panel _("Schedule") id="schedule" %}
        <p>Please complete here below the schedule of your last year of high school,<br>
        indicating for each domain the number of hours of education followed per week (h/w).</p>

        {% panel _("Ancient languages") %}
          {% bootstrap_field schedule_form.latin %}
          {% bootstrap_field schedule_form.greek %}
        {% endpanel %}

        {% panel _("Sciences") %}
          {% bootstrap_field schedule_form.chemistry %}
          {% bootstrap_field schedule_form.physic %}
          {% bootstrap_field schedule_form.biology %}
        {% endpanel %}

        {% panel _("Modern languages") %}
          {% bootstrap_field schedule_form.german %}
          {% bootstrap_field schedule_form.dutch %}
          {% bootstrap_field schedule_form.english %}
          {% bootstrap_field schedule_form.french %}
          <div class="row">
            <div class="col-sm-6">{% bootstrap_field schedule_form.modern_languages_other_label %}</div>
            <div class="col-sm-6">{% bootstrap_field schedule_form.modern_languages_other_hours %}</div>
          </div>
        {% endpanel %}

        {% panel "" %}
          {% bootstrap_field schedule_form.mathematics %}
          {% bootstrap_field schedule_form.it %}
          {% bootstrap_field schedule_form.social_sciences %}
          {% bootstrap_field schedule_form.economic_sciences %}

          <div class="row">
            <div class="col-sm-6">{% bootstrap_field schedule_form.other_label %}</div>
            <div class="col-sm-6">{% bootstrap_field schedule_form.other_hours %}</div>
          </div>
        {% endpanel %}

      {% endpanel %}
    {% endpanel %}

    {% panel _("At which result level do you consider yourself?") %}
      {% bootstrap_field main_form.result %}
    {% endpanel %}
  </div>

{% endblock %}

{% block script %}
  {{ form.media }}
  {{ foreign_diploma_form.media }}
  <script type="application/javascript">
    $(function () {
      function setNullValue(selector) {
        $("select,textarea,input[type!=radio]", selector).val(null).trigger('change');
        $("input[type=radio]", selector).prop('checked', false);
      }

      $('#got-diploma').dependsOn({
        'input[name=got_diploma]': { values: ["True"] },
      },{ onDisable: function () {
        setNullValue("#got-diploma")
      }});

      $('#foreign-diploma').dependsOn({
        'input[name=diploma_type]': { values: ["FOREIGN"] },
      },{ onDisable: function () {
        setNullValue("#diploma_type")
      }});

      $('#belgian-diploma').dependsOn({
        'input[name=diploma_type]': { values: ["BELGIAN"] },
      },{ onDisable: function () {
        setNullValue("#diploma_type")
      }});
      $('#education-type').dependsOn({
        'input[name=belgian_diploma-community]': { values: ["FRENCH_SPEAKING"] },
      }, { onDisable: function () {
        setNullValue("#belgian_diploma-community")
      }});
      $('#schedule').dependsOn({
        'input[name=belgian_diploma-educational_type]': { values: ["TEACHING_OF_GENERAL_EDUCATION", "TRANSITION_METHOD", "ARTISTIC_TRANSITION"] },
      },{ onDisable: function () {
        setNullValue("#schedule")
      }});

    });
  </script>
{% endblock %}
